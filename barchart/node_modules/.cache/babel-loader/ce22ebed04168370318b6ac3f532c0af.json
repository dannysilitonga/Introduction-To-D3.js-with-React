{"ast":null,"code":"import * as d3 from 'd3';\nconst MARGIN = {\n  TOP: 30,\n  BOTTOM: 300,\n  LEFT: 90,\n  RIGHT: 30\n};\nconst WIDTH = 860 - MARGIN.LEFT - MARGIN.RIGHT;\nconst HEIGHT = 800 - MARGIN.TOP - MARGIN.BOTTOM;\nexport default class D3Chart {\n  constructor(element) {\n    const vis = this;\n    vis.svg = d3.select(element).append(\"svg\").attr(\"width\", WIDTH + MARGIN.LEFT + MARGIN.RIGHT).attr(\"height\", HEIGHT + MARGIN.TOP + MARGIN.BOTTOM).append(\"g\").attr(\"transform\", \"translate(\".concat(MARGIN.LEFT, \", \").concat(MARGIN.TOP, \")\"));\n    vis.xLabel = vis.svg.append(\"text\").attr(\"x\", WIDTH / 2).attr(\"y\", HEIGHT + 80).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"19px\");\n    vis.svg.append(\"text\").attr(\"x\", -(HEIGHT / 2)).attr(\"y\", -75).attr(\"text-anchor\", \"middle\").text(\"Number of Views\").attr(\"transform\", \"rotate(-90)\");\n    vis.xAxisGroup = vis.svg.append(\"g\").attr(\"transform\", \"translate(0, \".concat(HEIGHT, \")\"));\n    vis.yAxisGroup = vis.svg.append(\"g\");\n    Promise.all([d3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_15_03.json\"), d3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_22_03.json\"), d3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_29_03.json\"), d3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_05_04.json\"), d3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_15_04.json\")]).then(datasets => {\n      console.log(datasets[0]['US']);\n      var polarityCount = countPolarity(datasets[0]);\n      console.log(\"the polarity count is\", polarityCount);\n\n      //const tempData = datasets[0]['US']['0AW21jPu-Wc']\n      //const tempData = restrucOrigData(datasets[0])\n      //console.log(\"tempData\", tempData)\n\n      //const res = tempData.reduce((acc, obj) => {\n      //\tconst existingIndex = acc.findIndex(\n      //\t\tel => el.videoID == obj.videoID && el.analysis == obj.analysis\n      //\t\t)\n      //\t\tif (existingIndex > -1) {\n      //\t\t\tacc[existingIndex].count += 1\n      //\t\t} else {\n      //\t\t\tacc.push({\n      //\t\t\t\tvideoID: obj.videoID,\n      //\t\t\t\tanalysis: obj.analysis,\n      //\t\t\t\tcount: 1\n      //\t\t\t})\n      //\t\t}\n      //\t\treturn acc\n      //\t}, [])\n      //\tconsole.log(\"res\", res)\n\n      const march15DataRestructured = restrucOrigData(datasets[0]);\n      const march15DataTemp = getPolarityCount(march15DataRestructured);\n      console.log(\"march 15 Data\", march15DataTemp);\n\n      //create sentiments object to count sentiment items\n      let sentiments = {};\n      march15DataTemp.forEach(eventObject => {\n        if (sentiments.hasOwnProperty(eventObject.analysis)) {\n          sentiments[eventObject.analysis]++;\n        } else {\n          sentiments[eventObject.analysis] = 1;\n        }\n      });\n      sentiments = Object.keys(sentiments).map(key => {\n        return {\n          'analysis': key,\n          'count': sentiments[key]\n        };\n      });\n\n      //console.log(\"sentiments\", sentiments)\n\n      vis.march15Data = restructureData(datasets[0]).slice(0, 20);\n      vis.march22Data = restructureData(datasets[1]).slice(0, 20);\n      vis.march29Data = restructureData(datasets[2]).slice(0, 20);\n      vis.april05Data = restructureData(datasets[3]).slice(0, 20);\n      vis.april15Data = restructureData(datasets[4]).slice(0, 20);\n      vis.update(\"march15\");\n    });\n  }\n  update(date) {\n    const vis = this;\n\n    //vis.data = (date == \"march15\") ? vis.march15Data : vis.april15Data;\n\n    if (date == \"march15\") vis.data = vis.march15Data;else if (date == \"march22\") vis.data = vis.march22Data;else if (date == \"march29\") vis.data = vis.march29Data;else if (date == \"april05\") vis.data = vis.april05Data;else if (date == \"april15\") vis.data = vis.april15Data;\n    const month = date.slice(0, -2).charAt(0).toUpperCase() + date.slice(0, -2).slice(1);\n    const convertedDate = date.substr(date.length - 2);\n    const converted_month_date = month.concat(\" \", convertedDate);\n\n    //console.log(\"converted date month\", converted_month_date)\n\n    vis.xLabel.text(\"Top Trending Videos on \".concat(converted_month_date));\n    const x = d3.scaleBand().range([0, WIDTH]).domain(vis.data.map(d => d.videoTitle)).padding(0.5);\n    const xAxisCall = d3.axisBottom(x);\n    vis.xAxisGroup.transition().duration(500).call(xAxisCall).selectAll(\"text\").style(\"font-size\", \"8px\").attr(\"transform\", \"translate(-10,0)rotate(-45)\").style(\"text-anchor\", \"end\");\n    const y = d3.scaleLinear().domain([d3.min(vis.data, d => d.videoCount) * 0.95, d3.max(vis.data, d => d.videoCount)]).range([HEIGHT, 0]);\n    const yAxisCall = d3.axisLeft(y);\n    vis.yAxisGroup.transition().duration(500).call(yAxisCall);\n    console.log(\"hello again\");\n\n    // DATA JOIN\n    const rects = vis.svg.selectAll(\"rect\").data(vis.data);\n\n    // EXIT \n    rects.exit().transition().duration(500).attr(\"height\", 0).attr(\"y\", HEIGHT).remove();\n\n    // UPDATE \n    rects.transition().duration(500).attr(\"x\", d => x(d.videoTitle)).attr(\"y\", d => y(d.videoCount)).attr(\"width\", x.bandwidth).attr(\"height\", d => HEIGHT - y(d.videoCount));\n\n    // ENTER\n    rects.enter().append(\"rect\").attr(\"x\", d => x(d.videoTitle)).attr(\"width\", x.bandwidth).attr(\"fill\", \"#5f0f40\").attr(\"y\", HEIGHT).transition().duration(500).attr(\"height\", d => HEIGHT - y(d.videoCount)).attr(\"y\", d => y(d.videoCount));\n  }\n}\nfunction restructureData(raw_data) {\n  var USAVideoCount = [];\n  for (const videoID in raw_data['US']) {\n    USAVideoCount.push({\n      videoTitle: videoID,\n      videoCount: Number(raw_data['US'][videoID]['view_count'])\n    });\n  }\n  USAVideoCount = USAVideoCount.sort((a, b) => a.videoCount < b.videoCount ? 1 : -1);\n  return USAVideoCount;\n}\nfunction countPolarity(rawData) {\n  var polarityCount = [];\n  var obj = {};\n  var countP = 0;\n  var countN = 0;\n  var countNe = 0;\n  for (const videoID in rawData['US']) {\n    for (const user in rawData['US'][videoID]) {\n      if (rawData['US'][videoID][user]['Analysis'] == 'Positive') obj[countP] = (obj[countP] || 0) + 1;else if (rawData['US'][videoID][user]['Analysis'] == 'Neutral') obj[countNe] = (obj[countNe] || 0) + 1;else if (rawData['US'][videoID][user]['Analysis'] == 'Negative') obj[countN] = (obj[countN] || 0) + 1;\n    }\n    polarityCount.push({\n      videoID: videoID,\n      polarityPositive: Number(obj[countP]),\n      polarityNeutral: Number(obj[countNe]),\n      polarityNegative: Number(obj[countNe])\n    });\n    countP = 0;\n    countN = 0;\n    countNe = 0;\n    return polarityCount;\n  }\n}\nfunction countPolarity2(rawData) {\n  for (const videoID in rawData['US']) {\n    const out = Object.values(rawData['US'][videoID].reduce((acc, _ref) => {\n      let {\n        current\n      } = _ref;\n      //Destructure the properites from the current object\n      const {\n        videoID,\n        Analysis\n      } = current;\n      //If the object doesn't already contain an Analysis key set up a new object with\n      // empty \n      acc[videoID] = acc[videoID] || {\n        videoID,\n        Analysis: []\n      };\n\n      // Push the analysis of the current object to analysis array\n      acc[videoID].Analysis.push(Analysis);\n\n      // Return the accumulator for the next iteration\n      return acc;\n    }, {}));\n  }\n  //return acc;\n}\nfunction restrucOrigData(rawData) {\n  const newData = [];\n  for (const videoID in rawData['US']) {\n    for (const user in rawData['US'][videoID]) {\n      newData.push({\n        videoID: videoID,\n        user: user,\n        analysis: rawData['US'][videoID][user]['Analysis'],\n        comments: rawData['US'][videoID][user]['Comments'],\n        polarity: rawData['US'][videoID][user]['Polarity']\n      });\n    }\n  }\n  return newData;\n}\nfunction getPolarityCount(rawData) {\n  const res = rawData.reduce((acc, obj) => {\n    const existingIndex = acc.findIndex(el => el.videoID == obj.videoID && el.analysis == obj.analysis);\n    if (existingIndex > -1) {\n      acc[existingIndex].count += 1;\n    } else {\n      acc.push({\n        videoID: obj.videoID,\n        analysis: obj.analysis,\n        count: 1\n      });\n    }\n    return acc;\n  }, []);\n  return res;\n}\n\n/*\nfunction countPolarity2(rawData){\n\tvar polarityCount = [];\n\tvar temp = [rawData[0]];\n\tfor (const index = 1; index < rawData.length; index++){  //videoID in rawData['US']){\n\t\tfor (const  subindex = 1; subindex < index.length; subindex++){ //user in rawData['US'][videoID]){\n\t\t\tif ( rawData[index][subindex] == rawData[index -1][subindex -1] + 1) { //rawData['US'][videoID][user]['Analysis'] == 'Positive'){\n\t\t\t\tpolarityCount.push({\n\t\t\t\t\tvideoID: videoID,\n\t\t\t\t\tpolarityPositive: countP += 1\n\t\t\t\t})\n\t\t\t} else \n\t\t\tif (rawData['US'][videoID][user]['Analysis'] == 'Neutral'){\n\t\t\t\tpolarityCount.push({\n\t\t\t\t\tvideoID: videoID,\n\t\t\t\t\tpolarityPositive: countN += 1\n\t\t\t\t})\n\t\t\t} else \n\t\t\tif (rawData['US'][videoID][user]['Analysis'] == 'Negative'){\n\t\t\t\tpolarityCount.push({\n\t\t\t\t\tvideoID: videoID,\n\t\t\t\t\tpolarityPositive: countNe += 1\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\treturn polarityCount \n}\n*/","map":{"version":3,"names":["d3","MARGIN","TOP","BOTTOM","LEFT","RIGHT","WIDTH","HEIGHT","D3Chart","constructor","element","vis","svg","select","append","attr","concat","xLabel","style","text","xAxisGroup","yAxisGroup","Promise","all","json","then","datasets","console","log","polarityCount","countPolarity","march15DataRestructured","restrucOrigData","march15DataTemp","getPolarityCount","sentiments","forEach","eventObject","hasOwnProperty","analysis","Object","keys","map","key","march15Data","restructureData","slice","march22Data","march29Data","april05Data","april15Data","update","date","data","month","charAt","toUpperCase","convertedDate","substr","length","converted_month_date","x","scaleBand","range","domain","d","videoTitle","padding","xAxisCall","axisBottom","transition","duration","call","selectAll","y","scaleLinear","min","videoCount","max","yAxisCall","axisLeft","rects","exit","remove","bandwidth","enter","raw_data","USAVideoCount","videoID","push","Number","sort","a","b","rawData","obj","countP","countN","countNe","user","polarityPositive","polarityNeutral","polarityNegative","countPolarity2","out","values","reduce","acc","_ref","current","Analysis","newData","comments","polarity","res","existingIndex","findIndex","el","count"],"sources":["/workspace/Introduction-To-D3.js-with-React/barchart/src/D3Stacked.js"],"sourcesContent":["import * as d3 from 'd3'\n\nconst MARGIN = { TOP: 30, BOTTOM: 300, LEFT: 90, RIGHT: 30 }\nconst WIDTH = 860 - MARGIN.LEFT - MARGIN.RIGHT;\nconst HEIGHT = 800 - MARGIN.TOP - MARGIN.BOTTOM;\n\nexport default class D3Chart {\n\tconstructor(element) {\n\t\tconst vis = this\n\n\t\tvis.svg = d3.select(element)\n\t\t\t.append(\"svg\")\n\t\t\t\t.attr(\"width\", WIDTH + MARGIN.LEFT + MARGIN.RIGHT)\n\t\t\t\t.attr(\"height\", HEIGHT + MARGIN.TOP + MARGIN.BOTTOM)\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"transform\", `translate(${MARGIN.LEFT}, ${MARGIN.TOP})`)\n\n\t\tvis.xLabel = vis.svg.append(\"text\")\n\t\t\t.attr(\"x\", WIDTH / 2)\n\t\t\t.attr(\"y\", HEIGHT + 80)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.style(\"font-size\", \"19px\")\n\n\t\tvis.svg.append(\"text\")\n\t\t\t.attr(\"x\", -(HEIGHT / 2))\n\t\t\t.attr(\"y\", -75)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.text(\"Number of Views\")\n\t\t\t.attr(\"transform\", \"rotate(-90)\")\n\n\t\tvis.xAxisGroup = vis.svg.append(\"g\")\n\t\t\t.attr(\"transform\", `translate(0, ${HEIGHT})`)\n\n\t\tvis.yAxisGroup = vis.svg.append(\"g\")\n\n\t\tPromise.all([\n\t\t\td3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_15_03.json\"),\n\t\t\td3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_22_03.json\"),\n\t\t\td3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_29_03.json\"),\n\t\t\td3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_05_04.json\"),\n\t\t\td3.json(\"https://sentimentviz-default-rtdb.firebaseio.com/sentiments_24_15_04.json\")\n\t\t]).then((datasets) => {\n\t\t\tconsole.log(datasets[0]['US'])\n\n\t\t\tvar polarityCount = countPolarity(datasets[0])\n\t\t\tconsole.log(\"the polarity count is\", polarityCount);\n\t\t\t\n\t\t\t//const tempData = datasets[0]['US']['0AW21jPu-Wc']\n\t\t\t//const tempData = restrucOrigData(datasets[0])\n\t\t\t//console.log(\"tempData\", tempData)\n\t\t\t\n\t\t\t//const res = tempData.reduce((acc, obj) => {\n\t\t\t//\tconst existingIndex = acc.findIndex(\n\t\t\t//\t\tel => el.videoID == obj.videoID && el.analysis == obj.analysis\n\t\t//\t\t)\n\t\t//\t\tif (existingIndex > -1) {\n\t\t//\t\t\tacc[existingIndex].count += 1\n\t\t//\t\t} else {\n\t\t//\t\t\tacc.push({\n\t\t//\t\t\t\tvideoID: obj.videoID,\n\t\t//\t\t\t\tanalysis: obj.analysis,\n\t\t//\t\t\t\tcount: 1\n\t\t//\t\t\t})\n\t\t//\t\t}\n\t\t//\t\treturn acc\n\t\t//\t}, [])\n\t\t//\tconsole.log(\"res\", res)\n\n\t\t\tconst march15DataRestructured = restrucOrigData(datasets[0])\n\t\t\t\n\t\t\tconst march15DataTemp = getPolarityCount(march15DataRestructured)\n\n\t\t\tconsole.log(\"march 15 Data\", march15DataTemp)\n\n\t\t\t//create sentiments object to count sentiment items\n\t\t\tlet sentiments = {};\n\t\t\tmarch15DataTemp.forEach( ( eventObject) => { \n\t\t\t\tif (sentiments.hasOwnProperty( eventObject.analysis ) ) {\n\t\t\t\t\tsentiments[eventObject.analysis]++;\n\t\t\t\t} else {\n\t\t\t\t\tsentiments[eventObject.analysis] = 1;\n\t\t\t\t} \n\t\t\t} );\n\t\t\tsentiments = Object.keys( sentiments ).map( ( key ) => {\n\t\t\t\treturn { 'analysis': key, 'count': sentiments[key] };\n\t\t\t})\n\n\t\t\t//console.log(\"sentiments\", sentiments)\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvis.march15Data = restructureData(datasets[0]).slice(0, 20)\n\t\t\tvis.march22Data = restructureData(datasets[1]).slice(0, 20)\n\t\t\tvis.march29Data = restructureData(datasets[2]).slice(0, 20)\n\t\t\tvis.april05Data = restructureData(datasets[3]).slice(0, 20)\n\t\t\tvis.april15Data = restructureData(datasets[4]).slice(0,20)\n\t\t\tvis.update(\"march15\")\n\t\t})\n\t}\n\n\tupdate(date) {\n\t\tconst vis = this\n\n\t\t//vis.data = (date == \"march15\") ? vis.march15Data : vis.april15Data;\n\n\t\tif (date == \"march15\") vis.data = vis.march15Data\n\t\telse if (date == \"march22\") vis.data = vis.march22Data\n\t\telse if (date == \"march29\") vis.data = vis.march29Data\n\t\telse if (date == \"april05\") vis.data = vis.april05Data\n\t\telse if (date == \"april15\") vis.data = vis.april15Data\n\n\n\t\tconst month = date.slice(0, -2).charAt(0).toUpperCase() + date.slice(0, -2).slice(1) \n\t\tconst convertedDate = date.substr(date.length-2);\n\t\tconst converted_month_date = month.concat(\" \", convertedDate)\n\n\t\t//console.log(\"converted date month\", converted_month_date)\n\n\n\t\tvis.xLabel.text(`Top Trending Videos on ${converted_month_date}`)\n\n\t\tconst x = d3.scaleBand()\n      \t\t.range([0, WIDTH])\n      \t\t.domain(vis.data.map((d) => d.videoTitle))\n      \t\t.padding(0.5)\n    \t\n\t\tconst xAxisCall = d3.axisBottom(x)\n    \n\t\tvis.xAxisGroup.transition().duration(500).call(xAxisCall)\n      \t\t.selectAll(\"text\")\n      \t\t.style(\"font-size\", \"8px\")\n      \t\t.attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n      \t\t.style(\"text-anchor\", \"end\")\n  \n    \tconst y = d3.scaleLinear()\n        \t.domain([\n          \td3.min(vis.data, d => d.videoCount) *0.95, \n          \td3.max(vis.data, d => d.videoCount)\n        \t])\n        \t.range([HEIGHT, 0])\n  \n    \tconst yAxisCall = d3.axisLeft(y)\n    \tvis.yAxisGroup.transition().duration(500).call(yAxisCall)\n    \tconsole.log(\"hello again\")\n\n    \t// DATA JOIN\n    \tconst rects = vis.svg.selectAll(\"rect\")\n      \t\t.data(vis.data)\n\n    \t// EXIT \n    \trects.exit()\n        \t.transition().duration(500)\n        \t\t.attr(\"height\", 0)\n        \t\t.attr(\"y\", HEIGHT)\n        \t\t.remove()\n\n    \t// UPDATE \n    \trects.transition().duration(500)\n      \t\t.attr(\"x\", d => x(d.videoTitle))\n      \t\t.attr(\"y\", d => y(d.videoCount))\n      \t\t.attr(\"width\", x.bandwidth)\n      \t\t.attr(\"height\", d => HEIGHT - y(d.videoCount))\n\n    \t// ENTER\n    \trects.enter().append(\"rect\")\n      \t.attr(\"x\", d => x(d.videoTitle))\n      \t.attr(\"width\", x.bandwidth)\n      \t.attr(\"fill\", \"#5f0f40\")\n      \t.attr(\"y\", HEIGHT)\n      \t.transition().duration(500)\n        \t.attr(\"height\", d => HEIGHT - y(d.videoCount))\n        \t.attr(\"y\", d => y(d.videoCount))\n\t}\n}\n\n\n\nfunction restructureData(raw_data) {\n\tvar USAVideoCount = [];\n\tfor(const videoID in raw_data['US']) {\n\t\tUSAVideoCount.push({\n\t\t\tvideoTitle: videoID,\n\t\t\tvideoCount: Number(raw_data['US'][videoID]['view_count'])\n\t\t});\n\t}\n\tUSAVideoCount = USAVideoCount.sort((a,b) => (a.videoCount < b.videoCount) ? 1: -1) \n\treturn USAVideoCount\n}\n\nfunction countPolarity(rawData){\n\tvar polarityCount = [];\n\tvar obj = {};\n\tvar countP = 0 ;\n\tvar countN = 0 ;\n\tvar countNe = 0 ;\n\tfor (const videoID in rawData['US']){\n\n\t\tfor (const user in rawData['US'][videoID]){\n\t\t\tif (rawData['US'][videoID][user]['Analysis'] == 'Positive') obj[countP] = (obj[countP] || 0) + 1\t\n\t\t\telse if (rawData['US'][videoID][user]['Analysis'] == 'Neutral') obj[countNe] = (obj[countNe] || 0) + 1\n\t\t\telse if (rawData['US'][videoID][user]['Analysis'] == 'Negative') obj[countN] = (obj[countN] || 0) + 1\n\t\t}\n\t\tpolarityCount.push({\n\t\t\tvideoID: videoID,\n\t\t\tpolarityPositive: Number(obj[countP]),\n\t\t\tpolarityNeutral: Number(obj[countNe]),\n\t\t\tpolarityNegative: Number(obj[countNe])\n\t\t})\n\t\tcountP=0;\n\t\tcountN=0;\n\t\tcountNe=0;\n\treturn polarityCount \n\t}\t\n}\n\nfunction countPolarity2(rawData){\n\tfor (const videoID in rawData['US']){\n\t\tconst out = Object.values(rawData['US'][videoID].reduce((acc, {current}) => {\n\t\t\t//Destructure the properites from the current object\n\t\t\tconst {videoID, Analysis } = current;\n\t\t\t//If the object doesn't already contain an Analysis key set up a new object with\n\t\t\t// empty \n\t\t\tacc[videoID] = acc[videoID] || {videoID, Analysis : []}\n\t\t\t\n\t\t\t// Push the analysis of the current object to analysis array\n\t\t\tacc[videoID].Analysis.push(Analysis);\n\n\t\t\t// Return the accumulator for the next iteration\n\t\t\treturn acc;\n\t\t}, {})); \n\t}\n\t//return acc;\n\n}\n\nfunction restrucOrigData(rawData) {\n\tconst newData = [];\n\tfor (const videoID in rawData['US']){\n\t\tfor ( const user in rawData['US'][videoID]){\n\t\t\tnewData.push({\n\t\t\t\tvideoID: videoID,\n\t\t\t\tuser: user,\n\t\t\t\tanalysis: rawData['US'][videoID][user]['Analysis'],\n\t\t\t\tcomments: rawData['US'][videoID][user]['Comments'],\n\t\t\t\tpolarity: rawData['US'][videoID][user]['Polarity']\n\t\t\t})\n\t\t}\n\t}\n\treturn newData\n}\n\nfunction getPolarityCount(rawData){\n\tconst res = rawData.reduce((acc, obj) => {\n\t\tconst existingIndex = acc.findIndex(\n\t\t\tel => el.videoID == obj.videoID && el.analysis == obj.analysis\n\t\t)\n\t\tif (existingIndex > -1) {\n\t\t\tacc[existingIndex].count += 1\n\t\t} else {\n\t\t\tacc.push({\n\t\t\t\tvideoID: obj.videoID,\n\t\t\t\tanalysis: obj.analysis,\n\t\t\t\tcount: 1\n\t\t\t})\n\t\t}\n\t\treturn acc\n\t}, [])\n\treturn res\n}\n\n\n/*\nfunction countPolarity2(rawData){\n\tvar polarityCount = [];\n\tvar temp = [rawData[0]];\n\tfor (const index = 1; index < rawData.length; index++){  //videoID in rawData['US']){\n\t\tfor (const  subindex = 1; subindex < index.length; subindex++){ //user in rawData['US'][videoID]){\n\t\t\tif ( rawData[index][subindex] == rawData[index -1][subindex -1] + 1) { //rawData['US'][videoID][user]['Analysis'] == 'Positive'){\n\t\t\t\tpolarityCount.push({\n\t\t\t\t\tvideoID: videoID,\n\t\t\t\t\tpolarityPositive: countP += 1\n\t\t\t\t})\n\t\t\t} else \n\t\t\tif (rawData['US'][videoID][user]['Analysis'] == 'Neutral'){\n\t\t\t\tpolarityCount.push({\n\t\t\t\t\tvideoID: videoID,\n\t\t\t\t\tpolarityPositive: countN += 1\n\t\t\t\t})\n\t\t\t} else \n\t\t\tif (rawData['US'][videoID][user]['Analysis'] == 'Negative'){\n\t\t\t\tpolarityCount.push({\n\t\t\t\t\tvideoID: videoID,\n\t\t\t\t\tpolarityPositive: countNe += 1\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\treturn polarityCount \n}\n*/\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}